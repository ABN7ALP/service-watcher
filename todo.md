# Fortune Wheel Project TODO

## قاعدة البيانات والنماذج الأساسية
- [x] تصميم جداول قاعدة البيانات (wallets, transactions, spins, deposits, withdrawals, spin_logs, daily_stats)
- [x] إضافة حقول إضافية لجدول users (IP, device, daily_win_limit)
- [x] تطبيق migrations للقاعدة

## نظام المحفظة والمعاملات المالية
- [x] بناء نظام المحفظة الثنائي (Available/Pending)
- [x] تطوير API لشحن الرصيد مع رفع إيصال شام كاش
- [x] تطوير API لطلبات السحب مع حد أدنى 10$
- [x] تطبيق Atomic Transactions لجميع العمليات المالية
- [x] إضافة نظام التسعير الذكي للباقات (1 لفة، 10 لفات، 50 لفة، 100 لفة)

## نظام العجلة الذكي
- [x] تطوير Adaptive Reward System مع النسب المحددة (45% خسارة، 25% قريب، 15% صغير، 10% متوسط، 4% كبير، 1% jackpot)
- [x] تطبيق منطق التعديل الديناميكي حسب سلوك المستخدم
- [x] إضافة HMAC لتوقيع نتائج اللفات
- [x] تطبيق Rate Limiting (10 ثواني بين اللفات)
- [x] إضافة سقف ربح يومي لكل مستخدم
- [x] تسجيل كل لفة في spin_logs مع IP وdevice

## واجهة العجلة التفاعلية
- [x] رسم العجلة بـ Canvas مع 6 قطاعات ملونة
- [x] تطبيق حركة الدوران السلسة (تسارع ثم تباطؤ درامي)
- [x] إضافة أصوات tick أثناء الدوران
- [x] إضافة تأثيرات بصرية عند الفوز (confetti، لمعان)
- [x] إضافة تأثيرات عند الخسارة (رمادي، fade out)
- [x] عرض الرصيد الحالي وعدد اللفات المتاحة

## لوحة التحكم الإدارية
- [x] صفحة مراجعة طلبات الشحن (قبول/رفض)
- [x] صفحة مراجعة طلبات السحب (قبول/رفض مع تحويل شام كاش)
- [x] صفحة إحصائيات الأرباح والخسائر
- [x] صفحة مراقبة النسب والتعديل اليدوي
- [x] صفحة إدارة المستخدمين المشبوهين (حظر/تحذير)
- [x] عرض سجلات كل العمليات (spins, deposits, withdrawals, logins)

## التصميم النفسي والتأثيرات
- [x] تطبيق خلفية داكنة (أسود/كحلي) مع ألوان دافئة للعجلة
- [x] إضافة رسائل تحفيزية بالعربية ('قريب جداً!', 'لف مرة تانية', 'الحظ قريب')
- [x] إضافة إشعارات أرباح وهمية ('فلان ربح 5$')
- [x] عرض عدّاد اللاعبين اليوم
- [x] صفحة إحصائيات عامة (عدد اللاعبين، إجمالي الأرباح، أكبر فوز)

## الحماية الأمنية
- [x] تطبيق JWT مع Refresh Tokens
- [x] إضافة HMAC لتوقيع جميع النتائج المالية
- [x] تطبيق Rate Limiting على جميع endpoints الحساسة
- [x] تسجيل IP وdevice لكل عملية
- [x] إضافة Kill Switch لإيقاف النظام عند تجاوز حدود الخسارة

## نظام الإشعارات
- [x] إشعار فوري للمالك عند طلب شحن جديد
- [x] إشعار فوري للمالك عند طلب سحب جديد
- [x] إشعار عند تجاوز حدود الربح اليومية
- [x] إشعار عند تجاوز حدود الخسارة اليومية
- [x] إشعار عند اكتشاف سلوك مشبوه

## اختبارات Vitest
- [x] اختبارات نظام المحفظة
- [x] اختبارات نظام العجلة والنسب
- [x] اختبارات Atomic Transactions
- [x] اختبارات Rate Limiting
- [x] اختبارات HMAC Signatures

## النشر والتوثيق
- [ ] رفع المشروع على GitHub
- [ ] نشر المشروع على Railway
- [ ] كتابة README شامل
- [ ] توثيق API endpoints

## صفحات المستخدم الإضافية
- [x] صفحة الشحن (رفع إيصال شام كاش)
- [x] صفحة السحب (طلب سحب الأرباح)
- [x] صفحة سجل اللفات (تاريخ اللفات والأرباح)
- [x] إضافة قائمة تنقل في الصفحة الرئيسية
